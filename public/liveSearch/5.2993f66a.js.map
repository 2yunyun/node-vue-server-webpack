{"version":3,"sources":["webpack:///5.2993f66a.js","webpack:///./client/states/search/huya/route.js","webpack:///./client/states/search/huya/template.html","webpack:///./client/states/search/huya/value.js","webpack:///./client/service/huyaService.js"],"names":["webpackJsonp","317","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_asyncToGenerator","fn","gen","apply","this","arguments","Promise","resolve","reject","step","key","arg","info","value","error","done","then","err","Object","defineProperty","_vue","_vue2","_template","_template2","_value","_value2","_huyaService","Index","extend","template","init","ready","$","data","methods","loadList","_this","regeneratorRuntime","mark","_callee","keyword","list","total","i","wrap","_context","prev","next","$route","params","searchLiveRoom","page","sent","responseHeader","status","response","docs","numFound","huyaList","setTimeout","showAnimation","length","stagger","items","push","t0","toast","stop","computed","isLoadOver","parseInt","route","transition","to","deactivate","318","319","date","Date","Format","320","321","ref","abrupt","_success","_error","ajax","type","url","success","xhr","_x","_x2"],"mappings":"AAAAA,cAAc,IAERC,IACA,SAASC,EAAQC,EAASC,GCHhC,YD2BC,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,GAEvF,QAASG,GAAkBC,GAAM,MAAO,YAAc,GAAIC,GAAMD,EAAGE,MAAMC,KAAMC,UAAY,OAAO,IAAIC,SAAQ,SAAUC,EAASC,GAAU,QAASC,GAAKC,EAAKC,GAAO,IAAM,GAAIC,GAAOV,EAAIQ,GAAKC,GAAUE,EAAQD,EAAKC,MAAS,MAAOC,GAAwB,WAAfN,GAAOM,GAAkB,MAAIF,GAAKG,SAAQR,GAAQM,GAAwBP,QAAQC,QAAQM,GAAOG,KAAK,SAAUH,GAAS,MAAOJ,GAAK,OAAQI,IAAW,SAAUI,GAAO,MAAOR,GAAK,QAASQ,KAAc,MAAOR,GAAK,WAtBvcS,OAAOC,eAAezB,EAAS,cAC3BmB,OAAO,GCPZ,IAAAO,GAAAzB,EAAA,KDYK0B,EAAQzB,EAAuBwB,GCXpCE,EAAA3B,EAAA,KDeK4B,EAAa3B,EAAuB0B,GCdzCE,EAAA7B,EAAA,KDkBK8B,EAAU7B,EAAuB4B,ECjBtC7B,GAAA,IACA,IAAA+B,GAAA/B,EAAA,KAEIgC,EAAQN,aAAIO,QAEZC,SAAAN,aACAO,KAAO,aAGPC,MAAQ,WAEJC,EAAEF,QAENG,KAAO,WACH,MAAAR,eAEJS,SACUC,SADD,WACW,GAAAC,GAAAhC,IAAA,OAAAJ,GAAAqC,mBAAAC,KAAA,QAAAC,KAAA,GAEJC,GACAP,EAEIQ,EACAC,EAMIC,CAZJ,OAAAN,oBAAAO,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,aAAAF,GAAAC,KAAA,EAEJN,EAAUJ,EAAKY,OAAOC,OAAOT,QAFzBK,EAAAE,KAAA,GAGS,EAAArB,EAAAwB,gBAAeV,EAAQJ,EAAKe,KAHrC,QAIR,GADIlB,EAHIY,EAAAO,KAILnB,GAAQA,EAAKoB,gBAAgD,GAA9BpB,EAAKoB,eAAeC,OAAY,CAQ9D,IAPIb,EAAOR,EAAKsB,SAAS,GAAGC,KACxBd,EAAST,EAAKsB,SAAS,GAAGE,SAC9BrB,EAAKsB,SAAShB,MAAQA,EACtBiB,WAAW,WACPvB,EAAKwB,eAAgB,GACvBnB,EAAKoB,OAASzB,EAAK0B,SACrB1B,EAAKwB,eAAgB,EACbjB,EAAE,EAAEA,EAAEF,EAAKoB,OAAOlB,GAAG,EACzBP,EAAKsB,SAASK,MAAMC,KAAKvB,EAAKE,GAElCP,GAAKe,MAAQ,EAfTN,EAAAE,KAAA,gBAAAF,EAAAC,KAAA,EAAAD,EAAAoB,GAAApB,EAAA,YAkBRb,EAAEkC,MAAM,WAlBA,yBAAArB,GAAAsB,SAAA5B,EAAAH,IAAA,cAsBpBgC,UACGC,WADQ,WAEJ,MAAOjE,MAAKsD,SAASK,MAAMF,QAAUS,SAASlE,KAAKsD,SAAShB,SAGnE6B,OACItC,KAAO,SAASuC,GACEA,EAAWC,GAAGxB,OAAOT,OACnCpC,MAAK+B,YAETuC,WAAa,SAAUF,GACnBpE,KAAKsD,UACDK,SACArB,MAAQ,GAEZtC,KAAK+C,KAAO,EACZqB,EAAWzB,UDuDtBrD,cClDciC,GDsDTgD,IACA,SAASlF,EAAQC,GEvHvBD,EAAAC,QAAA,o+DF6HMkF,IACA,SAASnF,EAAQC,GAEtB,YAEAwB,QAAOC,eAAezB,EAAS,cAC3BmB,OAAO,GGnIZ,IAAMA,IACFgE,MAAO,GAAIC,OAAOC,OAAO,cACzBrB,UACIK,SACArB,MAAQ,GAEZS,KAAO,EAEPS,eAAgB,EAChBE,QAAU,IHwIbpE,cGrIcmB,GHyITmE,IACA,SAASvF,EAAQC,KAMjBuF,IACA,SAASxF,EAAQC,GAEtB,YAwCA,SAASM,GAAkBC,GAAM,MAAO,YAAc,GAAIC,GAAMD,EAAGE,MAAMC,KAAMC,UAAY,OAAO,IAAIC,SAAQ,SAAUC,EAASC,GAAU,QAASC,GAAKC,EAAKC,GAAO,IAAM,GAAIC,GAAOV,EAAIQ,GAAKC,GAAUE,EAAQD,EAAKC,MAAS,MAAOC,GAAwB,WAAfN,GAAOM,GAAkB,MAAIF,GAAKG,SAAQR,GAAQM,GAAwBP,QAAQC,QAAQM,GAAOG,KAAK,SAAUH,GAAS,MAAOJ,GAAK,OAAQI,IAAW,SAAUI,GAAO,MAAOR,GAAK,QAASQ,KAAc,MAAOR,GAAK,WAtCvcS,OAAOC,eAAezB,EAAS,cAC3BmB,OAAO,GAKUnB,GAAQwD,eAAiB,WAC1C,GAAIgC,GAAMlF,EAAkBqC,mBAAmBC,KItK7C,QAAAC,GAA8BC,EAAQW,GAAtC,MAAAd,oBAAAO,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,aAAAF,GAAAsC,OAAA,SAEI,GAAI7E,SAAQ,SAAC8E,EAAQC,GACxBrD,EAAEsD,MACEC,KAAO,MACPC,IAAO,SAAShD,EAAQ,SAASW,EACjCsC,QAAU,SAASlC,GACf6B,EAAQ7B,IAEZzC,MAAQ,SAAS4E,GACbL,EAAM,aAVf,wBAAAxC,GAAAsB,SAAA5B,EAAAnC,QJgMF,OAAO,UAAwBuF,EAAIC,GAC/B,MAAOV,GAAI/E,MAAMC,KAAMC","file":"5.2993f66a.js","sourcesContent":["webpackJsonp([5],{\n\n/***/ 317:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _vue = __webpack_require__(300);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tvar _template = __webpack_require__(318);\n\t\n\tvar _template2 = _interopRequireDefault(_template);\n\t\n\tvar _value = __webpack_require__(319);\n\t\n\tvar _value2 = _interopRequireDefault(_value);\n\t\n\t__webpack_require__(320);\n\t\n\tvar _huyaService = __webpack_require__(321);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { return step(\"next\", value); }, function (err) { return step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\t\n\tvar Index = _vue2.default.extend({\n\t    //replace : true, //必须注释掉 不然动画失效\n\t    template: _template2.default,\n\t    init: function init() {},\n\t    ready: function ready() {\n\t        //做浏览器判断 和 兼容\n\t        //需要初始化一下,不然监听不到infinite事件\n\t        $.init();\n\t    },\n\t    data: function data() {\n\t        return _value2.default;\n\t    },\n\t    methods: {\n\t        loadList: function loadList() {\n\t            var _this = this;\n\t\n\t            return _asyncToGenerator(regeneratorRuntime.mark(function _callee() {\n\t                var keyword, data, list, total, i;\n\t                return regeneratorRuntime.wrap(function _callee$(_context) {\n\t                    while (1) {\n\t                        switch (_context.prev = _context.next) {\n\t                            case 0:\n\t                                _context.prev = 0;\n\t                                keyword = _this.$route.params.keyword;\n\t                                _context.next = 4;\n\t                                return (0, _huyaService.searchLiveRoom)(keyword, _this.page);\n\t\n\t                            case 4:\n\t                                data = _context.sent;\n\t\n\t                                if (data && data.responseHeader && data.responseHeader.status == 0) {\n\t                                    list = data.response[3].docs;\n\t                                    total = data.response[3].numFound;\n\t\n\t                                    _this.huyaList.total = total;\n\t                                    setTimeout(function () {\n\t                                        _this.showAnimation = false;\n\t                                    }, list.length * _this.stagger);\n\t                                    _this.showAnimation = true;\n\t                                    for (i = 0; i < list.length; i += 1) {\n\t                                        _this.huyaList.items.push(list[i]);\n\t                                    }\n\t                                    _this.page += 1;\n\t                                }\n\t                                _context.next = 11;\n\t                                break;\n\t\n\t                            case 8:\n\t                                _context.prev = 8;\n\t                                _context.t0 = _context['catch'](0);\n\t\n\t                                $.toast('请求虎牙直播失败');\n\t\n\t                            case 11:\n\t                            case 'end':\n\t                                return _context.stop();\n\t                        }\n\t                    }\n\t                }, _callee, _this, [[0, 8]]);\n\t            }))();\n\t        }\n\t    },\n\t    computed: {\n\t        isLoadOver: function isLoadOver() {\n\t            return this.huyaList.items.length >= parseInt(this.huyaList.total);\n\t        }\n\t    },\n\t    route: {\n\t        data: function data(transition) {\n\t            var keyword = transition.to.params.keyword;\n\t            this.loadList();\n\t        },\n\t        deactivate: function deactivate(transition) {\n\t            this.huyaList = {\n\t                items: [],\n\t                total: 0\n\t            };\n\t            this.page = 1;\n\t            transition.next();\n\t        }\n\t    }\n\t});\n\t\n\texports.default = Index;\n\n/***/ },\n\n/***/ 318:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"content huya\\\">\\n\\n    <div class=\\\"row\\\" style=\\\"margin: 0;\\\">\\n        <div class=\\\"col-50 video-box\\\"\\n             @click=\\\"goRoute('/video?url='+encodeURIComponent('http://m.huya.com/'+item.game_privateHost),this)\\\"\\n             v-for=\\\"item in huyaList.items\\\"\\n             transition=\\\"video-box\\\"\\n             stagger=\\\"100\\\">\\n            <span class=\\\"video-tag video-tag-online\\\">直播</span>\\n            <div class=\\\"video-img\\\">\\n                <img :src.once=\\\"item.game_screenshot\\\">\\n            </div>\\n            <div class=\\\"video-title\\\">\\n               {{{item.game_roomName}}}\\n            </div>\\n            <div class=\\\"video-info\\\">\\n                <span class=\\\"video-nickname\\\">{{item.game_nick.substr(0,14)}}</span>\\n                <span class=\\\"video-number\\\">{{item.game_total_count}}</span>\\n                <span class=\\\"video-cate\\\">{{item.gameName}}</span>\\n            </div>\\n        </div>\\n\\n        <template v-if=\\\"!showAnimation\\\">\\n            <div class=\\\"col-50 video-box\\\" v-if=\\\"!isLoadOver\\\"\\n                 @click=\\\"loadList()\\\">\\n                <div class=\\\"video-img\\\"></div>\\n                <div class=\\\"load-more\\\">加载更多</div>\\n                <div class=\\\"video-title\\\">\\n                    &emsp;\\n                </div>\\n                <div class=\\\"video-info\\\">\\n                    <span class=\\\"\\\">&emsp;</span>\\n                    <span class=\\\"\\\">&emsp;</span>\\n                    <span class=\\\"\\\">&emsp;</span>\\n                </div>\\n            </div>\\n            <div class=\\\"col-50 video-box\\\" v-else>\\n                <div class=\\\"video-img\\\"></div>\\n                <div class=\\\"load-more\\\">没有更多了</div>\\n                <div class=\\\"video-title\\\">\\n                    &emsp;\\n                </div>\\n                <div class=\\\"video-info\\\">\\n                    <span class=\\\"\\\">&emsp;</span>\\n                    <span class=\\\"\\\">&emsp;</span>\\n                    <span class=\\\"\\\">&emsp;</span>\\n                </div>\\n            </div>\\n        </template>\\n    </div>\\n\\n</div>\"\n\n/***/ },\n\n/***/ 319:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\tvar value = {\n\t    date: new Date().Format('yyyy-MM-dd'),\n\t    huyaList: {\n\t        items: [],\n\t        total: 0\n\t    },\n\t    page: 1,\n\t\n\t    showAnimation: true,\n\t    stagger: 100\n\t};\n\t\n\texports.default = value;\n\n/***/ },\n\n/***/ 320:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n\n/***/ 321:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\t//异步函数\n\t\n\tvar searchLiveRoom = exports.searchLiveRoom = function () {\n\t    var ref = _asyncToGenerator(regeneratorRuntime.mark(function _callee(keyword, page) {\n\t        return regeneratorRuntime.wrap(function _callee$(_context) {\n\t            while (1) {\n\t                switch (_context.prev = _context.next) {\n\t                    case 0:\n\t                        return _context.abrupt('return', new Promise(function (_success, _error) {\n\t                            $.ajax({\n\t                                type: 'GET',\n\t                                url: '/huya/' + keyword + '?page=' + page,\n\t                                success: function success(response) {\n\t                                    _success(response);\n\t                                },\n\t                                error: function error(xhr) {\n\t                                    _error('请求失败');\n\t                                }\n\t                            });\n\t                        }));\n\t\n\t                    case 1:\n\t                    case 'end':\n\t                        return _context.stop();\n\t                }\n\t            }\n\t        }, _callee, this);\n\t    }));\n\t\n\t    return function searchLiveRoom(_x, _x2) {\n\t        return ref.apply(this, arguments);\n\t    };\n\t}();\n\n\tfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { return step(\"next\", value); }, function (err) { return step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** 5.2993f66a.js\n **/","'use strict';\nimport Vue from 'vue'\nimport Tpl from './template.html'\nimport Value from './value'\nimport './style.less'\nimport {searchLiveRoom} from '../../../service/huyaService'\n\nlet Index = Vue.extend({\n    //replace : true, //必须注释掉 不然动画失效\n    template : Tpl,\n    init : function () {\n\n    },\n    ready : function(){ //做浏览器判断 和 兼容\n        //需要初始化一下,不然监听不到infinite事件\n        $.init();\n    },\n    data : ()=>{\n        return Value\n    },\n    methods: {\n        async loadList(){\n            try{\n                let keyword = this.$route.params.keyword;\n                let data = await searchLiveRoom(keyword,this.page);\n                if(data && data.responseHeader && data.responseHeader.status == 0){\n                    let list = data.response[3].docs;\n                    let total =  data.response[3].numFound;\n                    this.huyaList.total = total;\n                    setTimeout(()=>{\n                        this.showAnimation = false;\n                    },list.length * this.stagger)\n                    this.showAnimation = true;\n                    for(let i=0;i<list.length;i+=1){\n                        this.huyaList.items.push(list[i])\n                    }\n                    this.page += 1;\n                }\n            }catch (error){\n                $.toast('请求虎牙直播失败')\n            }\n        }\n    },\n    computed : {\n       isLoadOver(){\n           return this.huyaList.items.length >= parseInt(this.huyaList.total);\n       }\n    },\n    route : {\n        data : function(transition){\n            let keyword = transition.to.params.keyword;\n            this.loadList();\n        },\n        deactivate : function (transition) {\n            this.huyaList = {\n                items : [],\n                total : 0\n            };\n            this.page = 1;\n            transition.next();\n        }\n    }\n})\n\nexport default Index\n\n\n/** WEBPACK FOOTER **\n ** ./client/states/search/huya/route.js\n **/","module.exports = \"<div class=\\\"content huya\\\">\\n\\n    <div class=\\\"row\\\" style=\\\"margin: 0;\\\">\\n        <div class=\\\"col-50 video-box\\\"\\n             @click=\\\"goRoute('/video?url='+encodeURIComponent('http://m.huya.com/'+item.game_privateHost),this)\\\"\\n             v-for=\\\"item in huyaList.items\\\"\\n             transition=\\\"video-box\\\"\\n             stagger=\\\"100\\\">\\n            <span class=\\\"video-tag video-tag-online\\\">直播</span>\\n            <div class=\\\"video-img\\\">\\n                <img :src.once=\\\"item.game_screenshot\\\">\\n            </div>\\n            <div class=\\\"video-title\\\">\\n               {{{item.game_roomName}}}\\n            </div>\\n            <div class=\\\"video-info\\\">\\n                <span class=\\\"video-nickname\\\">{{item.game_nick.substr(0,14)}}</span>\\n                <span class=\\\"video-number\\\">{{item.game_total_count}}</span>\\n                <span class=\\\"video-cate\\\">{{item.gameName}}</span>\\n            </div>\\n        </div>\\n\\n        <template v-if=\\\"!showAnimation\\\">\\n            <div class=\\\"col-50 video-box\\\" v-if=\\\"!isLoadOver\\\"\\n                 @click=\\\"loadList()\\\">\\n                <div class=\\\"video-img\\\"></div>\\n                <div class=\\\"load-more\\\">加载更多</div>\\n                <div class=\\\"video-title\\\">\\n                    &emsp;\\n                </div>\\n                <div class=\\\"video-info\\\">\\n                    <span class=\\\"\\\">&emsp;</span>\\n                    <span class=\\\"\\\">&emsp;</span>\\n                    <span class=\\\"\\\">&emsp;</span>\\n                </div>\\n            </div>\\n            <div class=\\\"col-50 video-box\\\" v-else>\\n                <div class=\\\"video-img\\\"></div>\\n                <div class=\\\"load-more\\\">没有更多了</div>\\n                <div class=\\\"video-title\\\">\\n                    &emsp;\\n                </div>\\n                <div class=\\\"video-info\\\">\\n                    <span class=\\\"\\\">&emsp;</span>\\n                    <span class=\\\"\\\">&emsp;</span>\\n                    <span class=\\\"\\\">&emsp;</span>\\n                </div>\\n            </div>\\n        </template>\\n    </div>\\n\\n</div>\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./client/states/search/huya/template.html\n ** module id = 318\n ** module chunks = 5\n **/","const value = {\n    date : new Date().Format('yyyy-MM-dd'),\n    huyaList : {\n        items : [],\n        total : 0\n    },\n    page : 1,\n\n    showAnimation : true,\n    stagger : 100,\n}\n\nexport default value;\n\n\n/** WEBPACK FOOTER **\n ** ./client/states/search/huya/value.js\n **/","\n//异步函数\nexport async function searchLiveRoom(keyword,page){\n    \n    return new Promise((success,error)=>{\n        $.ajax({\n            type : 'GET',\n            url  : '/huya/'+keyword+'?page='+page,\n            success : function(response){\n                success(response)\n            },\n            error : function(xhr){\n                error('请求失败')\n            }\n        });\n    })\n}\n\n\n/** WEBPACK FOOTER **\n ** ./client/service/huyaService.js\n **/"],"sourceRoot":""}