webpackJsonp([7],{327:function(n,e,i){"use strict";function t(n){return n&&n.__esModule?n:{"default":n}}function s(n){return function(){var e=n.apply(this,arguments);return new Promise(function(n,i){function t(s,a){try{var o=e[s](a),r=o.value}catch(c){return void i(c)}return o.done?void n(r):Promise.resolve(r).then(function(n){return t("next",n)},function(n){return t("throw",n)})}return t("next")})}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(300),o=t(a),r=i(328),c=t(r),l=i(329),u=t(l);i(330);var v=i(331),d=o["default"].extend({template:c["default"],init:function(){},ready:function(){$.init()},data:function(){return u["default"]},methods:{loadList:function(){var n=this;return s(regeneratorRuntime.mark(function e(){var i,t,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=n.$route.params.keyword,e.next=4,(0,v.searchLiveRoom)(i,n.page);case 4:if(t=e.sent,t&&200==t.status)for(n.page+=1,n.biliList.total=t.total,setTimeout(function(){n.showAnimation=!1},t.items.length*n.stagger),n.showAnimation=!0,s=0;s<t.items.length;s+=1)n.biliList.items.push(t.items[s]);e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),$.toast("请求bilibili失败");case 11:case"end":return e.stop()}},e,n,[[0,8]])}))()}},computed:{isLoadOver:function(){return this.biliList.items.length>=parseInt(this.biliList.total)}},route:{data:function(n){n.to.params.keyword;this.loadList()},deactivate:function(n){this.biliList={items:[],total:0},this.page=1,n.next()}}});e["default"]=d},328:function(n,e){n.exports='<div class="content bili">\n\n    <div class="row" style="margin: 0;">\n        <div class="col-50 video-box"\n             @click="goRoute(\'/video?url=\'+encodeURIComponent(\'http://live.bilibili.com/h5\'+item.href),this)"\n             v-for="item in biliList.items | filterBy isliving in \'isliving\'"\n             transition="video-box"\n             stagger="100">\n            <!--<span class="video-tag video-tag-online">直播</span>-->\n            <div class="video-img">\n                <img :src.once="item.img">\n            </div>\n            <div class="video-avatar">\n                <img :src.once="item.avatar" style=""/>\n            </div>\n            <div class="video-title">\n               {{{item.title}}}\n            </div>\n            <div class="video-info">\n                <span class="video-nickname">{{item.nick}}</span>\n                <span class="video-number">{{item.person}}</span>\n                <span class="video-cate">{{item.type}}</span>\n            </div>\n        </div>\n\n        <template v-if="!showAnimation">\n            <div class="col-50 video-box" v-if="!isLoadOver"\n                 @click="loadList()">\n                <div class="video-img"></div>\n                <div class="load-more">加载更多</div>\n                <div class="video-title">\n                    &emsp;\n                </div>\n                <div class="video-info">\n                    <span class="">&emsp;</span>\n                    <span class="">&emsp;</span>\n                    <span class="">&emsp;</span>\n                </div>\n            </div>\n            <div class="col-50 video-box" v-else>\n                <div class="video-img"></div>\n                <div class="load-more">没有更多了</div>\n                <div class="video-title">\n                    &emsp;\n                </div>\n                <div class="video-info">\n                    <span class="">&emsp;</span>\n                    <span class="">&emsp;</span>\n                    <span class="">&emsp;</span>\n                </div>\n            </div>\n        </template>\n    </div>\n\n</div>'},329:function(n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={isliving:!0,biliList:{items:[],total:0},page:1,showAnimation:!0,stagger:100};e["default"]=i},330:function(n,e){},331:function(n,e){"use strict";function i(n){return function(){var e=n.apply(this,arguments);return new Promise(function(n,i){function t(s,a){try{var o=e[s](a),r=o.value}catch(c){return void i(c)}return o.done?void n(r):Promise.resolve(r).then(function(n){return t("next",n)},function(n){return t("throw",n)})}return t("next")})}}Object.defineProperty(e,"__esModule",{value:!0});e.searchLiveRoom=function(){var n=i(regeneratorRuntime.mark(function e(n,i){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){$.ajax({type:"GET",url:"/bili/"+n+"?page="+i,success:function(n){e(n)},error:function(n){t("请求失败")}})}));case 1:case"end":return e.stop()}},e,this)}));return function(e,i){return n.apply(this,arguments)}}()}});
//# sourceMappingURL=7.299285d7.js.map