webpackJsonp([6],{322:function(n,e,t){"use strict";function i(n){return n&&n.__esModule?n:{"default":n}}function s(n){return function(){var e=n.apply(this,arguments);return new Promise(function(n,t){function i(s,o){try{var a=e[s](o),r=a.value}catch(u){return void t(u)}return a.done?void n(r):Promise.resolve(r).then(function(n){return i("next",n)},function(n){return i("throw",n)})}return i("next")})}}Object.defineProperty(e,"__esModule",{value:!0});var o=t(300),a=i(o),r=t(323),u=i(r),c=t(324),d=i(c);t(325);var v=t(326),l=a["default"].extend({template:u["default"],init:function(){},ready:function(){$.init()},data:function(){return d["default"]},methods:{loadList:function(){var n=this;return s(regeneratorRuntime.mark(function e(){var t,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.$route.params.keyword,e.next=4,(0,v.searchLiveRoom)(t,n.page);case 4:if(i=e.sent,i&&200==i.status)for(n.page+=1,n.douyuList.total=i.total,setTimeout(function(){n.showAnimation=!1},i.items.length*n.stagger),n.showAnimation=!0,s=0;s<i.items.length;s+=1)n.douyuList.items.push(i.items[s]);e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),$.toast("请求斗鱼失败");case 11:case"end":return e.stop()}},e,n,[[0,8]])}))()}},computed:{isLoadOver:function(){return this.douyuList.items.length>=parseInt(this.douyuList.total)}},route:{data:function(n){n.to.params.keyword;this.loadList()},deactivate:function(n){this.douyuList={items:[],total:0},this.page=1,n.next()}}});e["default"]=l},323:function(n,e){n.exports='<div class="content douyu">\n\n    <div class="row" style="margin: 0;">\n        <div class="col-50 video-box"\n             @click="goRoute(\'/video?url=\'+encodeURIComponent(\'http://www.douyu.com\'+item.href),this)"\n             v-for="item in douyuList.items | filterBy isliving in \'isliving\'"\n             transition="video-box"\n             stagger="100">\n            <span class="video-tag video-tag-online">直播</span>\n            <div class="video-img">\n                <img :src.once="item.img">\n            </div>\n            <div class="video-title">\n               {{{item.title}}}\n            </div>\n            <div class="video-info">\n                <span class="video-nickname">{{item.nick}}</span>\n                <span class="video-number">{{item.person}}</span>\n                <span class="video-cate">{{item.type}}</span>\n            </div>\n        </div>\n\n        <template v-if="!showAnimation">\n            <div class="col-50 video-box" v-if="!isLoadOver"\n                 @click="loadList()">\n                <div class="video-img"></div>\n                <div class="load-more">加载更多</div>\n                <div class="video-title">\n                    &emsp;\n                </div>\n                <div class="video-info">\n                    <span class="">&emsp;</span>\n                    <span class="">&emsp;</span>\n                    <span class="">&emsp;</span>\n                </div>\n            </div>\n            <div class="col-50 video-box" v-else>\n                <div class="video-img"></div>\n                <div class="load-more">没有更多了</div>\n                <div class="video-title">\n                    &emsp;\n                </div>\n                <div class="video-info">\n                    <span class="">&emsp;</span>\n                    <span class="">&emsp;</span>\n                    <span class="">&emsp;</span>\n                </div>\n            </div>\n        </template>\n    </div>\n\n</div>'},324:function(n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t={isliving:!0,douyuList:{items:[],total:0},page:1,showAnimation:!0,stagger:100};e["default"]=t},325:function(n,e){},326:function(n,e){"use strict";function t(n){return function(){var e=n.apply(this,arguments);return new Promise(function(n,t){function i(s,o){try{var a=e[s](o),r=a.value}catch(u){return void t(u)}return a.done?void n(r):Promise.resolve(r).then(function(n){return i("next",n)},function(n){return i("throw",n)})}return i("next")})}}Object.defineProperty(e,"__esModule",{value:!0});e.searchLiveRoom=function(){var n=t(regeneratorRuntime.mark(function e(n,t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,i){$.ajax({type:"GET",url:"/douyu/"+n+"?page="+t,success:function(n){e(n)},error:function(n){i("请求失败")}})}));case 1:case"end":return e.stop()}},e,this)}));return function(e,t){return n.apply(this,arguments)}}()}});
//# sourceMappingURL=6.b1d4aa16.js.map